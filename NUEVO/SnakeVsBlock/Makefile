# Makefile para Snake vs Block
# Soporta versiÃ³n Terminal (sin dependencias) y versiÃ³n SDL2 (con ventana grÃ¡fica)

CXX = g++
CXXFLAGS = -std=c++17 -Wall -O2
LDFLAGS_TERMINAL = -lpthread
LDFLAGS_SDL2 = `sdl2-config --cflags --libs`

# Targets
TARGET_TERMINAL = SnakeVsBlock_terminal
TARGET_SDL2 = SnakeVsBlock_sdl2
SRC_TERMINAL = main_terminal.cpp
SRC_SDL2 = main_sdl2.cpp

# Default: compilar versiÃ³n terminal (sin dependencias)
all: terminal

# VersiÃ³n Terminal (recomendada - sin dependencias externas)
terminal: $(SRC_TERMINAL)
	@echo "ğŸ”¨ Compilando versiÃ³n TERMINAL (sin dependencias)..."
	$(CXX) $(CXXFLAGS) -o $(TARGET_TERMINAL) $(SRC_TERMINAL) $(LDFLAGS_TERMINAL)
	@echo "âœ… CompilaciÃ³n exitosa: $(TARGET_TERMINAL)"
	@echo "   Ejecuta: ./$(TARGET_TERMINAL)"

# VersiÃ³n SDL2 (requiere SDL2 instalado)
sdl2: $(SRC_SDL2)
	@echo "ğŸ”¨ Compilando versiÃ³n SDL2 (con ventana grÃ¡fica)..."
	@command -v sdl2-config >/dev/null 2>&1 || { echo "âŒ SDL2 no instalado. Instala con: sudo apt install libsdl2-dev"; exit 1; }
	$(CXX) $(CXXFLAGS) -o $(TARGET_SDL2) $(SRC_SDL2) $(LDFLAGS_SDL2)
	@echo "âœ… CompilaciÃ³n exitosa: $(TARGET_SDL2)"
	@echo "   Ejecuta: ./$(TARGET_SDL2)"

# Compilar ambas versiones
both: terminal sdl2
	@echo "âœ… Ambas versiones compiladas!"

# Ejecutar versiÃ³n terminal
run: terminal
	@clear
	./$(TARGET_TERMINAL)

# Ejecutar versiÃ³n SDL2
run-sdl2: sdl2
	./$(TARGET_SDL2)

# Limpiar archivos compilados
clean:
	@echo "ğŸ§¹ Limpiando archivos compilados..."
	rm -f $(TARGET_TERMINAL) $(TARGET_SDL2)
	@echo "âœ… Limpieza completa"

# Instalar dependencias para versiÃ³n SDL2
install-sdl2:
	@echo "ğŸ“¦ Instalando SDL2..."
	sudo apt update
	sudo apt install -y libsdl2-dev

# InformaciÃ³n sobre el proyecto
info:
	@echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
	@echo "â•‘          ğŸ SNAKE VS BLOCK - C++ EDITION ğŸ®              â•‘"
	@echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
	@echo ""
	@echo "ğŸ“‹ OPCIONES DE COMPILACIÃ“N:"
	@echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
	@echo "  make              - Compilar versiÃ³n TERMINAL (recomendada)"
	@echo "  make terminal     - Compilar versiÃ³n TERMINAL"
	@echo "  make sdl2         - Compilar versiÃ³n SDL2 (ventana grÃ¡fica)"
	@echo "  make both         - Compilar ambas versiones"
	@echo "  make run          - Compilar y ejecutar versiÃ³n terminal"
	@echo "  make run-sdl2     - Compilar y ejecutar versiÃ³n SDL2"
	@echo "  make clean        - Limpiar archivos compilados"
	@echo "  make install-sdl2 - Instalar SDL2 (solo para versiÃ³n grÃ¡fica)"
	@echo ""
	@echo "âœ¨ VERSIÃ“N TERMINAL:"
	@echo "   â€¢ Sin dependencias externas"
	@echo "   â€¢ Funciona en cualquier Linux"
	@echo "   â€¢ FÃ¡cil de compartir (solo 1 archivo .cpp)"
	@echo "   â€¢ Ejecutable pequeÃ±o (~47KB)"
	@echo ""
	@echo "âœ¨ VERSIÃ“N SDL2:"
	@echo "   â€¢ Ventana grÃ¡fica bonita"
	@echo "   â€¢ Requiere: sudo apt install libsdl2-dev"
	@echo "   â€¢ Mejor experiencia visual"
	@echo "   â€¢ Ejecutable mÃ¡s grande (~200KB)"
	@echo ""
	@echo "ğŸ® Para jugar:"
	@echo "   make run          (terminal)"
	@echo "   make run-sdl2     (ventana grÃ¡fica)"
	@echo ""

.PHONY: all terminal sdl2 both run run-sdl2 clean install-sdl2 info
